<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · GenomicBreedingDB.jl</title><meta name="title" content="Home · GenomicBreedingDB.jl"/><meta property="og:title" content="Home · GenomicBreedingDB.jl"/><meta property="twitter:title" content="Home · GenomicBreedingDB.jl"/><meta name="description" content="Documentation for GenomicBreedingDB.jl."/><meta property="og:description" content="Documentation for GenomicBreedingDB.jl."/><meta property="twitter:description" content="Documentation for GenomicBreedingDB.jl."/><meta property="og:url" content="https://GenomicBreeding.github.io/GenomicBreedingDB.jl/"/><meta property="twitter:url" content="https://GenomicBreeding.github.io/GenomicBreedingDB.jl/"/><link rel="canonical" href="https://GenomicBreeding.github.io/GenomicBreedingDB.jl/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>GenomicBreedingDB.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/GenomicBreeding/GenomicBreedingDB.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/GenomicBreeding/GenomicBreedingDB.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="GenomicBreedingDB"><a class="docs-heading-anchor" href="#GenomicBreedingDB">GenomicBreedingDB</a><a id="GenomicBreedingDB-1"></a><a class="docs-heading-anchor-permalink" href="#GenomicBreedingDB" title="Permalink"></a></h1><p>Documentation for <a href="https://github.com/GenomicBreeding/GenomicBreedingDB.jl">GenomicBreedingDB</a>.</p><ul><li><a href="#GenomicBreedingDB.addfilters!-Tuple{Vector{String}, Vector{Int64}, Vector{Any}}"><code>GenomicBreedingDB.addfilters!</code></a></li><li><a href="#GenomicBreedingDB.checkparams-Tuple{Any}"><code>GenomicBreedingDB.checkparams</code></a></li><li><a href="#GenomicBreedingDB.cleaunptraitnames-Tuple{String}"><code>GenomicBreedingDB.cleaunptraitnames</code></a></li><li><a href="#GenomicBreedingDB.dbconnect-Tuple{}"><code>GenomicBreedingDB.dbconnect</code></a></li><li><a href="#GenomicBreedingDB.dbinit"><code>GenomicBreedingDB.dbinit</code></a></li><li><a href="#GenomicBreedingDB.df_to_io-Tuple{Any}"><code>GenomicBreedingDB.df_to_io</code></a></li><li><a href="#GenomicBreedingDB.extractmainfieldstablesandcols-Tuple{LibPQ.Connection}"><code>GenomicBreedingDB.extractmainfieldstablesandcols</code></a></li><li><a href="#GenomicBreedingDB.queryanalyses-Tuple{}"><code>GenomicBreedingDB.queryanalyses</code></a></li><li><a href="#GenomicBreedingDB.querytable-Tuple{String}"><code>GenomicBreedingDB.querytable</code></a></li><li><a href="#GenomicBreedingDB.querytrialsandphenomes-Tuple{}"><code>GenomicBreedingDB.querytrialsandphenomes</code></a></li><li><a href="#GenomicBreedingDB.updatedescription-Tuple{String}"><code>GenomicBreedingDB.updatedescription</code></a></li><li><a href="#GenomicBreedingDB.uploadtrialsorphenomes-Tuple{}"><code>GenomicBreedingDB.uploadtrialsorphenomes</code></a></li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GenomicBreedingDB.addfilters!-Tuple{Vector{String}, Vector{Int64}, Vector{Any}}" href="#GenomicBreedingDB.addfilters!-Tuple{Vector{String}, Vector{Int64}, Vector{Any}}"><code>GenomicBreedingDB.addfilters!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">addfilters!(expression::Vector{String}, counter::Vector{Int64}, parameters::Vector{Any}; 
            table::String, values::Union{Vector{String}, Vector{Float64}, Vector{Int64}])::Nothing</code></pre><p>Add SQL <code>LIKE</code> filters to a query expression for pattern matching on table names.</p><p>This function modifies the input vectors to build SQL <code>LIKE</code> conditions for pattern matching, replacing wildcards (*) with SQL wildcards (%) and handling multiple values.</p><p><strong>Arguments</strong></p><ul><li><code>expression::Vector{String}</code>: Vector to store SQL query expressions</li><li><code>counter::Vector{Int64}</code>: Vector containing a single counter for parameter numbering</li><li><code>parameters::Vector{Any}</code>: Vector to store parameter values for the query</li><li><code>table::String</code>: Name of the database table</li><li><code>values::Union{Vector{String}, Vector{Float64}, Vector{Int64}}</code>: Values to match against table names</li></ul><p><strong>Effects</strong></p><ul><li>Modifies <code>expression</code> by adding <code>LIKE</code> conditions</li><li>Increments the counter in <code>counter</code></li><li>Adds values to <code>parameters</code></li></ul><p><strong>Returns</strong></p><p><code>Nothing</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenomicBreeding/GenomicBreedingDB.jl/blob/142cad59b7b8658d08cd34f4f08f0f61a6030136/src/download.jl#L297-L320">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GenomicBreedingDB.checkparams-Tuple{Any}" href="#GenomicBreedingDB.checkparams-Tuple{Any}"><code>GenomicBreedingDB.checkparams</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">checkparams(params)::Nothing</code></pre><p>Check input parameters for illegal characters that could be used in SQL injection attacks.</p><p><strong>Arguments</strong></p><ul><li><code>params</code>: Array or collection of parameters to check. Non-finite values (missing, NaN, Inf) are filtered out.</li></ul><p><strong>Returns</strong></p><ul><li><code>Nothing</code>: Returns nothing if no illegal characters are found.</li></ul><p><strong>Throws</strong></p><ul><li><code>ErrorException</code>: If illegal characters are found in any parameter, throws an error with details about which parameters contained illegal characters.</li></ul><p><strong>Details</strong></p><p>Checks for the following illegal characters:</p><ul><li>semicolon (;)</li><li>hash (#)</li><li>single quote (&#39;)</li><li>double quote (&quot;)</li><li>double dash (–)</li><li>forward slash ()</li><li>parentheses ( )</li><li>equal sign (=)</li><li>percent sign (%)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenomicBreeding/GenomicBreedingDB.jl/blob/142cad59b7b8658d08cd34f4f08f0f61a6030136/src/download.jl#L1-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GenomicBreedingDB.cleaunptraitnames-Tuple{String}" href="#GenomicBreedingDB.cleaunptraitnames-Tuple{String}"><code>GenomicBreedingDB.cleaunptraitnames</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cleaunptraitnames(trait_name::String)::String</code></pre><p>Clean up trait names by replacing whitespace and special characters with underscores.</p><p><strong>Arguments</strong></p><ul><li><code>trait_name::String</code>: The trait name to be cleaned</li></ul><p><strong>Returns</strong></p><ul><li><code>String</code>: The cleaned trait name with spaces, tabs and pipe characters replaced with underscores</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenomicBreeding/GenomicBreedingDB.jl/blob/142cad59b7b8658d08cd34f4f08f0f61a6030136/src/download.jl#L383-L393">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GenomicBreedingDB.dbconnect-Tuple{}" href="#GenomicBreedingDB.dbconnect-Tuple{}"><code>GenomicBreedingDB.dbconnect</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dbconnect()::LibPQ.Connection</code></pre><p>Establishes a connection to a PostgreSQL database using environment variables.</p><p><strong>Returns</strong></p><ul><li><code>LibPQ.Connection</code>: A connection object to the PostgreSQL database</li></ul><p><strong>Environment Variables Required</strong></p><ul><li><code>DB_USER</code>: Database username</li><li><code>DB_PASSWORD</code>: Database password </li><li><code>DB_NAME</code>: Name of the database</li><li><code>DB_HOST</code>: Database host address</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenomicBreeding/GenomicBreedingDB.jl/blob/142cad59b7b8658d08cd34f4f08f0f61a6030136/src/connection.jl#L1-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GenomicBreedingDB.dbinit" href="#GenomicBreedingDB.dbinit"><code>GenomicBreedingDB.dbinit</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dbinit(schema_path::String = &quot;db/schema.sql&quot;)::Nothing</code></pre><p>Initialize the database by executing SQL statements from a schema file.</p><p>This function connects to the database, reads SQL statements from the specified schema file, and executes them sequentially. Each statement in the file should be separated by semicolons.</p><p><strong>Arguments</strong></p><ul><li><code>schema_path::String</code>: Path to the SQL schema file. Defaults to &quot;db/schema.sql&quot;</li></ul><p><strong>Returns</strong></p><ul><li><code>Nothing</code>: Function performs database operations but does not return a value</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenomicBreeding/GenomicBreedingDB.jl/blob/142cad59b7b8658d08cd34f4f08f0f61a6030136/src/connection.jl#L26-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GenomicBreedingDB.df_to_io-Tuple{Any}" href="#GenomicBreedingDB.df_to_io-Tuple{Any}"><code>GenomicBreedingDB.df_to_io</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">df_to_io(df)</code></pre><p>Convert a DataFrame to a CSV-formatted byte vector.</p><p>Takes a DataFrame <code>df</code> and serializes it to a tab-delimited CSV format in memory. Returns the contents as a Vector{UInt8}.</p><p><strong>Arguments</strong></p><ul><li><code>df</code>: The DataFrame to convert to CSV format</li></ul><p><strong>Returns</strong></p><ul><li><code>Vector{UInt8}</code>: The CSV data as a byte vector</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenomicBreeding/GenomicBreedingDB.jl/blob/142cad59b7b8658d08cd34f4f08f0f61a6030136/src/download.jl#L961-L974">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GenomicBreedingDB.extractmainfieldstablesandcols-Tuple{LibPQ.Connection}" href="#GenomicBreedingDB.extractmainfieldstablesandcols-Tuple{LibPQ.Connection}"><code>GenomicBreedingDB.extractmainfieldstablesandcols</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">extractmainfieldstablesandcols(conn::LibPQ.Connection)::DataFrame</code></pre><p>Extract and sort main field tables and columns from a PostgreSQL database.</p><p>This function queries the information schema of a PostgreSQL database to get table and column names, excluding system tables and specific columns/tables. It then sorts the fields in a predetermined order by temporarily adding prefixes to certain column names.</p><p><strong>Arguments</strong></p><ul><li><code>conn::LibPQ.Connection</code>: Active PostgreSQL database connection</li></ul><p><strong>Returns</strong></p><ul><li><code>DataFrame</code>: A sorted DataFrame with two columns:<ul><li><code>table_name</code>: Name of the database table</li><li><code>column_name</code>: Name of the column in the corresponding table</li></ul></li></ul><p><strong>Details</strong></p><p>The function:</p><ol><li>Excludes system schemas (&#39;pg<em>catalog&#39;, &#39;information</em>schema&#39;)</li><li>Excludes columns ending with &#39;id&#39;</li><li>Excludes &#39;description&#39; columns</li><li>Excludes &#39;traits&#39; and &#39;phenotype_data&#39; tables</li><li>Excludes tables matching &#39;analys%s%&#39; pattern</li><li>Sorts fields consecutively:   6.1. species  6.2. classification  6.3. name  6.4. population  6.5. year  6.6. season  6.7. harvest  6.8. site  6.9. replication  6.10. block  6.11. row  6.12. col</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenomicBreeding/GenomicBreedingDB.jl/blob/142cad59b7b8658d08cd34f4f08f0f61a6030136/src/download.jl#L211-L248">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GenomicBreedingDB.queryanalyses-Tuple{}" href="#GenomicBreedingDB.queryanalyses-Tuple{}"><code>GenomicBreedingDB.queryanalyses</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">queryanalyses(; analyses::Vector{String}, verbose::Bool = false)::DataFrame</code></pre><p>Query and retrieve analysis data from a database, combining information from multiple tables and traits.</p><p><strong>Arguments</strong></p><ul><li><code>analyses::Vector{String}</code>: Vector of analysis names to query from the database</li><li><code>verbose::Bool=false</code>: If true, prints detailed progress information during execution</li></ul><p><strong>Returns</strong></p><ul><li><code>DataFrame</code>: A DataFrame containing the combined analysis results with the following:<ul><li>Standard fields from the main database tables</li><li>Dynamic columns for each trait associated with the requested analyses</li><li>Rows grouped by the main fields and aggregated trait values</li></ul></li></ul><p><strong>Details</strong></p><p>The function performs the following operations:</p><ol><li>Connects to the database</li><li>Extracts relevant table and column names</li><li>Builds a parameterized SQL query that:<ul><li>Selects main fields from various tables</li><li>Pivots trait values into columns</li><li>Joins multiple tables (analysis<em>tags, phenotype</em>data, entries, traits, trials, layouts, analyses)</li><li>Filters results based on the requested analyses</li><li>Groups and sorts the results</li></ul></li></ol><p><strong>Example</strong></p><pre><code class="language-julia hljs">querytable(&quot;analyses&quot;)
queryanalyses(analyses=[&quot;analysis_1&quot;], verbose=true)
queryanalyses(analyses=[&quot;analysis_2&quot;], verbose=true)
queryanalyses(analyses=[&quot;analysis_3&quot;], verbose=true)
queryanalyses(analyses=[&quot;analysis_4&quot;], verbose=true)
queryanalyses(analyses=[&quot;analysis_1&quot;, &quot;analysis_4&quot;], verbose=true)
queryanalyses(analyses=[&quot;analysis_3&quot;, &quot;analysis_4&quot;], verbose=true)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenomicBreeding/GenomicBreedingDB.jl/blob/142cad59b7b8658d08cd34f4f08f0f61a6030136/src/download.jl#L799-L836">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GenomicBreedingDB.querytable-Tuple{String}" href="#GenomicBreedingDB.querytable-Tuple{String}"><code>GenomicBreedingDB.querytable</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">querytable(
    table::String;
    fields::Union{Missing, Vector{String}} = missing,
    filters::Union{Missing, Dict{String, Tuple{Int64, Int64}}, Dict{String, Tuple{Float64, Float64}}, Dict{String, Vector{Int64}}, Dict{String, Vector{String}}} = missing,
)::DataFrame</code></pre><p>Query a PostgreSQL database table and return results as a DataFrame.</p><p><strong>Arguments</strong></p><ul><li><code>table::String</code>: Name of the database table to query</li><li><code>fields::Union{Missing, Vector{String}}</code>: Optional vector of column names to select. If missing, selects all columns (*)</li><li><code>filters::Union{Missing, Dict}</code>: Optional dictionary of filter conditions where:<ul><li>Keys are column names (String)</li><li>Values can be:<ul><li><code>Tuple{Int64,Int64}</code> for BETWEEN conditions</li><li><code>Vector{Int64}</code> for IN conditions with numbers</li><li><code>Vector{String}</code> for IN conditions with strings</li></ul></li></ul></li></ul><p><strong>Returns</strong></p><ul><li><code>DataFrame</code>: Query results as a DataFrame</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">querytable(&quot;entries&quot;)
querytable(&quot;traits&quot;)
querytable(&quot;trials&quot;)
querytable(&quot;layouts&quot;)
querytable(&quot;phenotype_data&quot;)
querytable(&quot;analyses&quot;)
querytable(&quot;analysis_tags&quot;)

querytable(&quot;phenotype_data&quot;, fields=[&quot;id&quot;, &quot;value&quot;])
querytable(&quot;analyses&quot;, fields=[&quot;name&quot;, &quot;description&quot;])
querytable(&quot;trials&quot;, filters=Dict(&quot;year&quot; =&gt; [&quot;2021&quot;, &quot;2030-2031&quot;]))
querytable(&quot;layouts&quot;, filters=Dict(&quot;replication&quot; =&gt; [&quot;replication_1&quot;]))
querytable(&quot;phenotype_data&quot;, fields=[&quot;id&quot;, &quot;value&quot;], filters=Dict(&quot;value&quot; =&gt; (1.0, 10.0)))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenomicBreeding/GenomicBreedingDB.jl/blob/142cad59b7b8658d08cd34f4f08f0f61a6030136/src/download.jl#L76-L114">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GenomicBreedingDB.querytrialsandphenomes-Tuple{}" href="#GenomicBreedingDB.querytrialsandphenomes-Tuple{}"><code>GenomicBreedingDB.querytrialsandphenomes</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">querytrialsandphenomes(;
    traits::Vector{String},
    species::Union{Missing,Vector{Union{String, Missing}}, Vector{String}} = missing,
    ploidies::Union{Missing,Vector{Union{String, Missing}}, Vector{String}} = missing, 
    crop_durations::Union{Missing,Vector{Union{String, Missing}}, Vector{String}} = missing,
    individuals_or_pools::Union{Missing,Vector{Union{String, Missing}}, Vector{String}} = missing,
    populations::Union{Missing,Vector{Union{String, Missing}}, Vector{String}} = missing,
    maternal_families::Union{Missing,Vector{Union{String, Missing}}, Vector{String}} = missing,
    paternal_families::Union{Missing,Vector{Union{String, Missing}}, Vector{String}} = missing,
    cultivars::Union{Missing,Vector{Union{String, Missing}}, Vector{String}} = missing,
    entries::Union{Missing,Vector{Union{String, Missing}}, Vector{String}} = missing,
    years::Union{Missing,Vector{Union{String, Missing}}, Vector{String}} = missing,
    seasons::Union{Missing,Vector{Union{String, Missing}}, Vector{String}} = missing,
    harvests::Union{Missing,Vector{Union{String, Missing}}, Vector{String}} = missing,
    sites::Union{Missing,Vector{Union{String, Missing}}, Vector{String}} = missing,
    blocks::Union{Missing,Vector{Union{String, Missing}}, Vector{String}} = missing,
    rows::Union{Missing,Vector{Union{String, Missing}}, Vector{String}} = missing,
    cols::Union{Missing,Vector{Union{String, Missing}}, Vector{String}} = missing,
    replications::Union{Missing,Vector{Union{String, Missing}}, Vector{String}} = missing,
    sort_rows::Bool = true,
    verbose::Bool = false,
)::DataFrame</code></pre><p>Query trials and phenotype data from a database with various filtering options.</p><p><strong>Arguments</strong></p><ul><li><code>traits</code>: Vector of trait names to query. Supports wildcards using &quot;*&quot;.</li><li><code>species</code>: Optional vector of species names or missing values to filter by</li><li><code>ploidies</code>: Optional vector of ploidy values or missing values to filter by</li><li><code>crop_durations</code>: Optional vector of crop duration values or missing values to filter by</li><li><code>individuals_or_pools</code>: Optional vector of individual/pool indicators or missing values </li><li><code>populations</code>: Optional vector of population names or missing values to filter by</li><li><code>maternal_families</code>: Optional vector of maternal family IDs or missing values to filter by</li><li><code>paternal_families</code>: Optional vector of paternal family IDs or missing values to filter by</li><li><code>cultivars</code>: Optional vector of cultivar names or missing values to filter by</li><li><code>entries</code>: Optional vector of entry names or missing values to filter by</li><li><code>years</code>: Optional vector of years or missing values to filter by</li><li><code>seasons</code>: Optional vector of season names or missing values to filter by</li><li><code>harvests</code>: Optional vector of harvest IDs or missing values to filter by</li><li><code>sites</code>: Optional vector of site names or missing values to filter by</li><li><code>blocks</code>: Optional vector of block IDs or missing values to filter by</li><li><code>rows</code>: Optional vector of row numbers or missing values to filter by</li><li><code>cols</code>: Optional vector of column numbers or missing values to filter by </li><li><code>replications</code>: Optional vector of replication numbers or missing values to filter by</li><li><code>sort_rows</code>: Whether to sort the output rows (default: true)</li><li><code>verbose</code>: Whether to print progress messages (default: false)</li></ul><p><strong>Returns</strong></p><p>A DataFrame containing the queried trial and phenotype data with columns for all specified fields and traits.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">querytrialsandphenomes(traits = [&quot;trait_1&quot;], verbose=true)
querytrialsandphenomes(traits = [&quot;trait_1&quot;], ploidies=[&quot;diploid&quot;], entries=[&quot;entry_01&quot;,&quot;entry_09&quot;], verbose=true)
querytrialsandphenomes(traits = [&quot;trait_1&quot;, &quot;trait_3&quot;], entries=[&quot;entry_06&quot;], verbose=true)
querytrialsandphenomes(traits = [&quot;trait_1&quot;, &quot;trait_3&quot;], entries=[&quot;entry_06&quot;, &quot;entry_03&quot;], seasons=[&quot;season_1&quot;, &quot;season_4&quot;], verbose=true)
querytrialsandphenomes(traits = [&quot;trait_1&quot;, &quot;trait_3&quot;], entries=[&quot;entry_06&quot;, &quot;entry_03&quot;], seasons=[&quot;season_3&quot;], years=[&quot;2021&quot;], verbose=true)
querytrialsandphenomes(traits = [&quot;trait_*&quot;], entries=[&quot;*1*&quot;], seasons=[&quot;Winter&quot;], years=[&quot;2030-2031&quot;], verbose=true)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenomicBreeding/GenomicBreedingDB.jl/blob/142cad59b7b8658d08cd34f4f08f0f61a6030136/src/download.jl#L401-L461">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GenomicBreedingDB.updatedescription-Tuple{String}" href="#GenomicBreedingDB.updatedescription-Tuple{String}"><code>GenomicBreedingDB.updatedescription</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">updatedescription(table::String;
    identifiers::Dict{String, Union{String, Missing}},
    description::String,
)::Nothing</code></pre><p>Update the description field in a specified table based on given identifiers.</p><p><strong>Arguments</strong></p><ul><li><code>table::String</code>: The name of the table to update.</li><li><code>identifiers::Dict{String, Union{String, Missing}}</code>: A dictionary of column names and their corresponding values to identify the rows to update. Missing values are allowed.</li><li><code>description::String</code>: The new description to set for the matching rows.</li></ul><p><strong>Throws</strong></p><ul><li><code>ArgumentError</code>: If the table name or any identifier key/value contains a semicolon.</li><li><code>ArgumentError</code>: If the specified table or any identifier column does not exist in the database.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">DotEnv.load!(joinpath(homedir(), &quot;.env&quot;))
querytable(&quot;entries&quot;)
updatedescription(
    &quot;entries&quot;,
    identifiers = Dict(
        &quot;name&quot; =&gt; &quot;entry_02&quot;,
        &quot;species&quot; =&gt; &quot;unspecified&quot;,
        &quot;population&quot; =&gt; &quot;pop_1&quot;,
        &quot;classification&quot; =&gt; missing,
    ),
    description = &quot;Entry number 2 from population 1 with unspecified species and no additional classification details&quot;,
)
querytable(&quot;entries&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenomicBreeding/GenomicBreedingDB.jl/blob/142cad59b7b8658d08cd34f4f08f0f61a6030136/src/upload.jl#L494-L527">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="GenomicBreedingDB.uploadtrialsorphenomes-Tuple{}" href="#GenomicBreedingDB.uploadtrialsorphenomes-Tuple{}"><code>GenomicBreedingDB.uploadtrialsorphenomes</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">uploadtrialsorphenomes(; fname::String, species::String=&quot;unspecified&quot;, 
    ploidy::Union{Missing,String}=missing,
    crop_duration::Union{Missing,String}=missing,
    individual_or_pool::Union{Missing,String}=missing,
    maternal_family::Union{Missing,String}=missing,
    paternal_family::Union{Missing,String}=missing,
    cultivar::Union{Missing,String}=missing,
    analysis::Union{Missing, String}=missing,
    analysis_description::Union{Missing, String}=missing,
    year::Union{Missing, String}=missing,
    season::Union{Missing, String}=missing,
    harvest::Union{Missing, String}=missing,
    site::Union{Missing, String}=missing,
    sep::String=&quot;\t&quot;,
    verbose::Bool=false)::Nothing</code></pre><p>Upload trial or phenotype data to a database from a delimited file or JLD2 format.</p><p><strong>Arguments</strong></p><ul><li><code>fname::String</code>: Path to the input file containing trial or phenotype data</li><li><code>species::String</code>: Species name (defaults to &quot;unspecified&quot;)</li><li><code>ploidy::Union{Missing,String}</code>: Ploidy level of the species (e.g. diploid or tetraploid)</li><li><code>crop_duration::Union{Missing,String}</code>: Duration category of the crop (e.g. annual, short-term, or perennial)</li><li><code>individual_or_pool::Union{Missing,String}</code>: Whether entries are individuals or pools (e.g. individual, half-sib family, or synthetic population)</li><li><code>maternal_family::Union{Missing,String}</code>: Maternal family identifier</li><li><code>paternal_family::Union{Missing,String}</code>: Paternal family identifier </li><li><code>cultivar::Union{Missing,String}</code>: Cultivar name</li><li><code>analysis::Union{Missing,String}</code>: Name of the analysis if applicable</li><li><code>analysis_description::Union{Missing,String}</code>: Description of the analysis</li><li><code>year::Union{Missing,String}</code>: Year of the trial/phenotype data which can be &quot;2023-2024&quot; for data with seasons spanning two years</li><li><code>season::Union{Missing,String}</code>: Season of the trial/phenotype data</li><li><code>harvest::Union{Missing,String}</code>: Harvest identifier</li><li><code>site::Union{Missing,String}</code>: Site location</li><li><code>sep::String</code>: Delimiter used in the input file (default is tab)</li><li><code>verbose::Bool</code>: Whether to print additional information during processing</li></ul><p><strong>Description</strong></p><p>Reads trial or phenotype data from a file and uploads it to a PostgreSQL database. The function can handle both delimited text files and JLD2 format files. It performs the following operations:</p><ol><li>Reads the input file as either Trials or Phenomes data</li><li>Inserts or updates entries in the database tables: entries, traits, trials, layouts</li><li>Records phenotype data with corresponding relationships</li><li>Optionally adds analysis tags if analysis information is provided</li></ol><p>The function uses SQL transactions to ensure data integrity during the upload process.</p><p><strong>Returns</strong></p><p><code>Nothing</code></p><p><strong>Note</strong></p><p>Requires a properly configured database connection and appropriate table structure in the target database.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using GenomicBreedingCore, GenomicBreedingIO, GenomicBreedingDB, DotEnv
genomes = GenomicBreedingCore.simulategenomes(n=1_000, l=100, verbose=true)
trials, _ = GenomicBreedingCore.simulatetrials(genomes=genomes, f_add_dom_epi=rand(50, 3), proportion_of_variance=rand(9, 50), verbose=false);
trials.years = replace.(trials.years, &quot;year_&quot; =&gt; &quot;203&quot;)
fname_trials = writedelimited(trials)
tebv = analyse(trials, &quot;y ~ 1|entries&quot;)
phenomes = merge(merge(tebv.phenomes[1], tebv.phenomes[2]), tebv.phenomes[3])
fname_phenomes = writedelimited(phenomes)

dbinit()
DotEnv.load!(joinpath(homedir(), &quot;.env&quot;))
dbinit()
uploadtrialsorphenomes(fname=fname_trials, verbose=true)
uploadtrialsorphenomes(fname=fname_phenomes, verbose=true)
uploadtrialsorphenomes(fname=fname_trials, analysis=&quot;analysis_1&quot;, verbose=true)
uploadtrialsorphenomes(fname=fname_trials, analysis=&quot;analysis_2&quot;, analysis_description=&quot;some description&quot;, verbose=true)
uploadtrialsorphenomes(fname=fname_phenomes, analysis=&quot;analysis_3&quot;, verbose=true)
uploadtrialsorphenomes(fname=fname_phenomes, analysis=&quot;analysis_4&quot;, year=&quot;2030-2031&quot;, ploidy=&quot;diploid&quot;, season=&quot;Winter&quot;, verbose=true)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenomicBreeding/GenomicBreedingDB.jl/blob/142cad59b7b8658d08cd34f4f08f0f61a6030136/src/upload.jl#L196-L270">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Tuesday 16 September 2025 05:38">Tuesday 16 September 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
